{% extends "base.html" %}
{% load static %}

{% block title %}{{ product.name }} — {{ block.super }}{% endblock %}

{% block content %}
<div class="product-detail">
    <h1>{{ product.name }}</h1>
    
    {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
    {% else %}
        <p>Изображение отсутствует</p>
    {% endif %}
    
    <p><strong>Цена:</strong> {{ product.price }} руб.</p>
    <p><strong>Категория:</strong> {{ product.category.name }}</p>
    <p><strong>Описание:</strong></p>
    <div class="description">{{ product.description }}</div>
    
    <p><strong>Дата создания:</strong> {{ product.created_at|date:"d.m.Y H:i" }}</p>
    <p><strong>Последнее обновление:</strong> {{ product.updated_at|date:"d.m.Y H:i" }}</p>

    <!-- Кнопки действий -->
    <div class="mt-3">
        <a href="{% url 'catalog:home' %}" class="btn btn-secondary">Вернуться на главную</a>


        <!-- «Снять с публикации» (только для модераторов) -->
        {% if perms.catalog.can_unpublish_product %}
            <a
                href="{% url 'catalog:unpublish_product' product.pk %}"
                class="btn btn-warning"
            >
                Снять с публикации
            </a>
        {% endif %}

        <!-- «Удалить» (только для пользователей с правом delete_product) -->
        {% if perms.catalog.delete_product %}
            <a
                href="{% url 'catalog:product_delete' product.pk %}"
                class="btn btn-danger"
            >
                Удалить
            </a>
        {% endif %}
    </div>
</div>
{% endblock %}
