{% extends "base.html" %}
{% load static %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <h1>Продукты</h1>

    <!-- Кнопка «Добавить продукт» — только для авторизованных -->
    {% if user.is_authenticated %}
        <a href="{% url 'catalog:product_create' %}" class="btn btn-primary mb-3">Добавить продукт</a>
    {% endif %}

    <!-- Список продуктов -->
    <ul class="list-group">
        {% for product in products %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <!-- Название и цена продукта -->
                <div>
                    <a href="{% url 'catalog:product_detail' product.pk %}">
                        {{ product.name }}
                    </a>
                    <span class="text-muted ms-2">({{ product.price }} руб.)</span>
                </div>

                <!-- Кнопки «Редактировать» и «Удалить» — только для авторизованных -->
                {% if user.is_authenticated %}
                    <div class="btn-group" role="group">
                        <a 
                            href="{% url 'catalog:product_update' product.pk %}"
                            class="btn btn-sm btn-outline-primary"
                        >
                            Редактировать
                        </a>
                        <a
                            href="{% url 'catalog:product_delete' product.pk %}"
                            class="btn btn-sm btn-outline-danger"
                        >
                            Удалить
                        </a>
                    </div>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <!-- Сообщение, если продуктов нет -->
    {% if not products %}
        <p class="text-muted mt-3">Пока нет ни одного продукта.</p>
    {% endif %}
{% endblock %}
